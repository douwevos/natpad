package net.natpad.gross.build.parser;
import net.natpad.gross.runtime.Symbol;
import net.natpad.gross.runtime.Terminal;
import net.natpad.gross.runtime.NonTerminal;
import net.natpad.gross.runtime.Token;
import net.natpad.gross.runtime.Fork;
import net.natpad.gross.runtime.StackEntry;
import net.natpad.gross.runtime.ParserContext;
import net.natpad.gross.runtime.ReduceLayout;

import net.natpad.gross.definition.bnf.CodeDefinition;
import net.natpad.gross.definition.bnf.CodeDefinitionList;
import net.natpad.gross.definition.bnf.IdList;
import net.natpad.gross.definition.bnf.Imports;
import net.natpad.gross.definition.bnf.ProductionDefinition;
import net.natpad.gross.definition.bnf.ProductionDefinitionList;
import net.natpad.gross.definition.bnf.ProductionRuleReference;
import net.natpad.gross.definition.bnf.RhsRule;
import net.natpad.gross.definition.bnf.RhsRuleList;
import net.natpad.gross.definition.bnf.RhsRulePart;
import net.natpad.gross.definition.bnf.RhsRulePartList;
import net.natpad.gross.definition.bnf.RhsSub;
import net.natpad.gross.definition.bnf.RhsSubList;
import net.natpad.gross.definition.bnf.RhsSymbolPart;
import net.natpad.gross.definition.bnf.RhsUnaryPart;
import net.natpad.gross.definition.bnf.RhsUnaryPart.UnaryOpp;
import net.natpad.gross.definition.bnf.Specification;
import net.natpad.gross.definition.bnf.TerminalDeclaration;
import net.natpad.gross.definition.bnf.TerminalDeclarationList;
import net.natpad.gross.definition.bnf.TypeDefinition;
import net.natpad.gross.definition.bnf.TypeDefinitionList;
import net.natpad.gross.definition.bnf.AstDescriptionList;
import net.natpad.gross.definition.bnf.AstDescription;


/* This file was generated by Gross-CC on 2016.11.22 AD at 13:09:17 CET */
public class Actions implements ParserContext.ReduceAction {

	public <T> T extract(Fork fork, ReduceLayout reduceLayout, int offset) {
		T result = null;
		StackEntry fe = fork.getEntry(reduceLayout.calculateStackOffset(offset));
		if (fe!=null) {
			result = (T) fe.lookahead.getValue();
		}
		return result;
	}

	public Object doAction(Fork fork, ReduceLayout reduceLayout, int actionId) {
		Object result = null;
		switch(actionId) {
			case 0 : { /* spec ⟶ term_decl_list:td production_list:pl */
				TerminalDeclarationList td = extract(fork, reduceLayout, 0);
				ProductionDefinitionList pl = extract(fork, reduceLayout, 1);
				result = new Specification(td, pl, null, null, null); 
			} break;
			case 1 : { /* term_decl_list ⟶ term_decl_list:tdlist term_decl:td */
				TerminalDeclarationList tdlist = extract(fork, reduceLayout, 0);
				TerminalDeclaration td = extract(fork, reduceLayout, 1);
				if (td==null) { result = tdlist; } else { result = new TerminalDeclarationList(tdlist, td); } 
			} break;
			case 2 : { /* production_list ⟶ production:prod */
				ProductionDefinition prod = extract(fork, reduceLayout, 0);
				result = new ProductionDefinitionList(null, prod); 
			} break;
			case 3 : { /* spec ⟶ term_decl_list:td production_list:pl imports_code:im type_definition_list:tl code_definition_list:cl */
				TerminalDeclarationList td = extract(fork, reduceLayout, 0);
				ProductionDefinitionList pl = extract(fork, reduceLayout, 1);
				Imports im = extract(fork, reduceLayout, 2);
				TypeDefinitionList tl = extract(fork, reduceLayout, 3);
				CodeDefinitionList cl = extract(fork, reduceLayout, 4);
				result = new Specification(td, pl, im, tl, cl); 
			} break;
			case 4 : { /* spec ⟶ term_decl_list:td production_list:pl ast_descriptions:ast_descriptions */
				TerminalDeclarationList td = extract(fork, reduceLayout, 0);
				ProductionDefinitionList pl = extract(fork, reduceLayout, 1);
				AstDescriptionList ast_descriptions = extract(fork, reduceLayout, 2);
				result = new Specification(td, pl, ast_descriptions); 
			} break;
			case 5 : { /* production_list ⟶ production_list:plist production:prod */
				ProductionDefinitionList plist = extract(fork, reduceLayout, 0);
				ProductionDefinition prod = extract(fork, reduceLayout, 1);
				result = new ProductionDefinitionList(plist, prod); 
			} break;
			case 6 : { /* ids ⟶ IDENTIFIER:id */
				String id = extract(fork, reduceLayout, 0);
				result = new IdList(null, id); 
			} break;
			case 7 : { /* rhs_rule ⟶ RULE_SEPERATOR rhs_rule_part_list:rulePartList */
				RhsRulePartList rulePartList = extract(fork, reduceLayout, 1);
				result = new RhsRule(null, rulePartList); 
			} break;
			case 8 : { /* rhs_rule_list ⟶ rhs_rule:rule */
				RhsRule rule = extract(fork, reduceLayout, 0);
				result = new RhsRuleList(null, rule); 
			} break;
			case 9 : { /* type_definition_list ⟶ type_definition_list:tdList type_definition:typeDef */
				TypeDefinitionList tdList = extract(fork, reduceLayout, 0);
				TypeDefinition typeDef = extract(fork, reduceLayout, 1);
				result = new TypeDefinitionList(tdList, typeDef); 
			} break;
			case 10 : { /* code_definition_list ⟶ code_definition_list:cdList code_definition:codeDef */
				CodeDefinitionList cdList = extract(fork, reduceLayout, 0);
				CodeDefinition codeDef = extract(fork, reduceLayout, 1);
				result = new CodeDefinitionList(cdList, codeDef); 
			} break;
			case 11 : { /* ast_descriptions ⟶ ast_descriptions:link ast_description:rule */
				AstDescriptionList link = extract(fork, reduceLayout, 0);
				AstDescription rule = extract(fork, reduceLayout, 1);
				result = new AstDescriptionList(link, rule); 
			} break;
			case 12 : { /* imports_code ⟶ IMPORTS CODE_TEXT:ct */
				String ct = extract(fork, reduceLayout, 1);
				result = new Imports(ct); 
			} break;
			case 13 : { /* term_decl ⟶ TERMINAL ids:ids SEMI */
				IdList ids = extract(fork, reduceLayout, 1);
				result = new TerminalDeclaration(ids); 
			} break;
			case 14 : { /* rhs_rule_list ⟶ rhs_rule_list:ruleList rhs_rule:rule */
				RhsRuleList ruleList = extract(fork, reduceLayout, 0);
				RhsRule rule = extract(fork, reduceLayout, 1);
				result = new RhsRuleList(ruleList, rule); 
			} break;
			case 15 : { /* production ⟶ IDENTIFIER:lhsName rhs_rule_list:ruleList SEMI */
				String lhsName = extract(fork, reduceLayout, 0);
				RhsRuleList ruleList = extract(fork, reduceLayout, 1);
				result = new ProductionDefinition(lhsName, ruleList); 
			} break;
			case 16 : { /* rhs_rule_part ⟶ rhs_entry_complete:entry */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = entry; 
			} break;
			case 17 : { /* rhs_rule_part_list ⟶ rhs_rule_part_list:rulePartList rhs_rule_part:rulePart */
				RhsRulePartList rulePartList = extract(fork, reduceLayout, 0);
				RhsRulePart rulePart = extract(fork, reduceLayout, 1);
				result = new RhsRulePartList(rulePartList, rulePart); 
			} break;
			case 18 : { /* rhs_entry ⟶ IDENTIFIER:symName opt_label:label */
				String symName = extract(fork, reduceLayout, 0);
				String label = extract(fork, reduceLayout, 1);
				result = new RhsSymbolPart(symName, label); 
			} break;
			case 19 : { /* rhs_entry_complete ⟶ rhs_entry:entry */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = entry; 
			} break;
			case 20 : { /* prod_rule_ref ⟶ IDENTIFIER:lhsName */
				String lhsName = extract(fork, reduceLayout, 0);
				result = new ProductionRuleReference(lhsName); 
			} break;
			case 21 : { /* ids ⟶ ids:ids COMMA IDENTIFIER:id */
				IdList ids = extract(fork, reduceLayout, 0);
				String id = extract(fork, reduceLayout, 2);
				result = new IdList(ids, id); 
			} break;
			case 22 : { /* rhs_rule ⟶ INDEX_MARK IDENTIFIER:imark RULE_SEPERATOR rhs_rule_part_list:rulePartList */
				String imark = extract(fork, reduceLayout, 1);
				RhsRulePartList rulePartList = extract(fork, reduceLayout, 3);
				result = new RhsRule(imark, rulePartList); 
			} break;
			case 23 : { /* rhs_sub ⟶ rhs_entry_complete:entry */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = new RhsSub(null, entry); 
			} break;
			case 24 : { /* rhs_sub_list ⟶ rhs_sub:sub */
				RhsSub sub = extract(fork, reduceLayout, 0);
				result = new RhsSubList(null, sub); 
			} break;
			case 25 : { /* rhs_entry_complete ⟶ rhs_entry:entry PLUS */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = new RhsUnaryPart(entry, UnaryOpp.ONE_OR_MORE); 
			} break;
			case 26 : { /* rhs_entry_complete ⟶ rhs_entry:entry STAR */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = new RhsUnaryPart(entry, UnaryOpp.ZERO_OR_MORE); 
			} break;
			case 27 : { /* rhs_entry_complete ⟶ rhs_entry:entry EXCL */
				RhsRulePart entry = extract(fork, reduceLayout, 0);
				result = new RhsUnaryPart(entry, UnaryOpp.OPTIONAL); 
			} break;
			case 28 : { /* code_definition ⟶ CODE prod_rule_ref:ruleRef CODE_TEXT:codeText */
				ProductionRuleReference ruleRef = extract(fork, reduceLayout, 1);
				String codeText = extract(fork, reduceLayout, 2);
				result = new CodeDefinition(0, ruleRef, codeText); 
			} break;
			case 29 : { /* ast_description ⟶ AST prod_rule_ref:ruleRef CODE_TEXT:codeText */
				ProductionRuleReference ruleRef = extract(fork, reduceLayout, 1);
				String codeText = extract(fork, reduceLayout, 2);
				result = new AstDescription(ruleRef, codeText); 
			} break;
			case 30 : { /* opt_label ⟶ COLON IDENTIFIER:label */
				String label = extract(fork, reduceLayout, 1);
				result = label; 
			} break;
			case 31 : { /* rhs_entry ⟶ LSQBRACK rhs_sub_list:sub RSQBRACK */
				RhsSubList sub = extract(fork, reduceLayout, 1);
				result = new RhsUnaryPart(sub, UnaryOpp.OPTIONAL); 
			} break;
			case 32 : { /* rhs_sub ⟶ rhs_sub:sub rhs_entry_complete:entry */
				RhsSub sub = extract(fork, reduceLayout, 0);
				RhsRulePart entry = extract(fork, reduceLayout, 1);
				result = new RhsSub(sub, entry); 
			} break;
			case 33 : { /* rhs_entry ⟶ LPAREN rhs_sub_list:sub RPAREN */
				RhsSubList sub = extract(fork, reduceLayout, 1);
				result = sub; 
			} break;
			case 34 : { /* type_definition ⟶ TYPE IDENTIFIER:symtype ids:symids SEMI */
				String symtype = extract(fork, reduceLayout, 1);
				IdList symids = extract(fork, reduceLayout, 2);
				result = new TypeDefinition(symtype, symids); 
			} break;
			case 35 : { /* prod_rule_ref ⟶ IDENTIFIER:lhsName INDEX_MARK IDENTIFIER:label */
				String lhsName = extract(fork, reduceLayout, 0);
				String label = extract(fork, reduceLayout, 2);
				result = new ProductionRuleReference(lhsName, label); 
			} break;
			case 36 : { /* prod_rule_ref ⟶ IDENTIFIER:lhsName INDEX_MARK NUMBER:offset */
				String lhsName = extract(fork, reduceLayout, 0);
				Long offset = extract(fork, reduceLayout, 2);
				result = new ProductionRuleReference(lhsName, offset.intValue()); 
			} break;
			case 37 : { /* rhs_sub_list ⟶ rhs_sub_list:subList BAR rhs_sub:sub */
				RhsSubList subList = extract(fork, reduceLayout, 0);
				RhsSub sub = extract(fork, reduceLayout, 2);
				result = new RhsSubList(subList, sub); 
			} break;
		}
		return result;
	}
}
